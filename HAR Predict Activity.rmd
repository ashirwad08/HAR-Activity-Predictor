---
title: "HAR Predict Activity"
author: "Ash Chakraborty"
date: "December 21, 2015"
output: html_document
---  

```{r global ECHO=FALSE, message=FALSE, warning=FALSE, error=FALSE}
library(caret)
library(ggplot2)
library(GGally)
library(foreach)
library(doParallel)
train.url <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv"
test.url <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv"
```  

# OVERVIEW  

"Human Activity Recognition" (HAR) exercise. Use data collected from a wearable
device to train a couple of machine learning models so that they can "learn" to
predict the "type" of activity ('classe') given a test data set.  

The link and the project are here: http://groupware.les.inf.puc-rio.br/har

# DATA PREVIEW  

Training data is at: https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv  

We'll need a cross validation set, since the testing set is provided separately, here: https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv

So, let's read in data, and create a Cross Validation set:  

```{r testtrain}
raw <- read.csv(train.url, header = T, na.strings = c(""," ","#DIV/0!","NA"))

trainInds <- createDataPartition(raw$classe, p=.7, list = F)
train <- raw[trainInds, -c(1:5)] #names, ids, timestamps aren't good predictors
cv <- raw[-trainInds, -c(1:5)]

```  

# Exploratory steps:  

* Get a handle on numerics, discrete, continuous variables
* What can we remove?
** Ids, names and shit
** Too many NAs
** Near Zero Variance variables
* What else can we remove/create on the features?
** Manual correlations against outcome (scattermatrix) by groups
** Collinearity checks (VIF?)
** PCA on similar measures?

```{r eda}
# training set cleaning and analysis
# consider removing NZVs
train <- train[,-nearZeroVar(train, saveMetrics = F)]

# Impute NAs; NZV has also removed some NAs. I want to remove variables where
# more than 80% of the values are unknown.
train <- train[, -which(colSums(is.na(train))/nrow(train) > 0.8)]

# This pretty much got rid of all NAs. Looks like we don't need any imputing
# knnimpute of NAs?

# Remove low correlation items?
ggpairs(data=train, columns=c(grep(".*(magnet_belt).*",colnames(train),value = F),54))

# Might want to center and scale

```  

# Training Models  

## Support Vector Machine w/ Gaussian Kernel 
## Random Forest

# Cross Validation  
## Confusion Matrix
## ROC


